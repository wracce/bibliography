"use strict";(self.webpackChunkBibliography=self.webpackChunkBibliography||[]).push([[908],{8908:(K,p,a)=>{a.d(p,{R:()=>b});var t=a(4650),g=a(3681),l=a(6895),s=a(8472),f=a(9367),h=a(1195),c=a(6175),d=a(3101),x=a(1813),_=a(433),F=a(7350);let C=(()=>{class n{transform(e,i){return""===(i=i.trim().toLowerCase()).trim()?e:e.filter(r=>this.foundSearch(r,i))}foundSearch(e,i){let r=!1;const o=[""+e.book?.name+e.book?.id,""+e.book?.id+e.book?.name];return i=i.replaceAll(" ","").trim(),o.forEach(m=>{(m=m.replaceAll(" ","").toLowerCase().trim()).includes(i)&&(r=!0)}),r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"search",type:n,pure:!0}),n})(),N=(()=>{class n{transform(e,i){return""===(i=i.trim().toLowerCase()).trim()?e:e.filter(r=>this.foundSearch(r,i))}foundSearch(e,i){let r=!1;const o=[""+e.userForm?.firstName+e.userForm?.lastName+e.userForm?.middleName+e.userForm?.id,""+e.userForm?.firstName+e.userForm?.middleName+e.userForm?.lastName+e.userForm?.id,""+e.userForm?.lastName+e.userForm?.firstName+e.userForm?.middleName+e.userForm?.id,""+e.userForm?.lastName+e.userForm?.middleName+e.userForm?.firstName+e.userForm?.id,""+e.userForm?.middleName+e.userForm?.firstName+e.userForm?.lastName+e.userForm?.id,""+e.userForm?.middleName+e.userForm?.lastName+e.userForm?.firstName+e.userForm?.id,""+e.userForm?.id+e.userForm?.lastName+e.userForm?.firstName+e.userForm?.middleName,""+e.userForm?.id+e.userForm?.lastName+e.userForm?.middleName+e.userForm?.firstName,""+e.userForm?.id+e.userForm?.middleName+e.userForm?.firstName+e.userForm?.lastName,""+e.userForm?.id+e.userForm?.middleName+e.userForm?.lastName+e.userForm?.firstName,""+e.userForm?.id+e.userForm?.firstName+e.userForm?.lastName+e.userForm?.middleName,""+e.userForm?.id+e.userForm?.firstName+e.userForm?.middleName+e.userForm?.lastName];return i=i.replaceAll(" ","").trim(),o.forEach(m=>{(m=m.replaceAll(" ","").toLowerCase().trim()).includes(i)&&(r=!0)}),console.log(o),console.log(i),r}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"searchByFIO",type:n,pure:!0}),n})(),T=(()=>{class n{transform(e,i){return console.log(i),!0===i?e.filter(r=>null==r.bookReturning||null==r.bookReturning?.returnDate):null==i?e.filter(r=>null!=r.bookReturning&&null!=r.bookReturning.returnDate):e}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"searchOnHands",type:n,pure:!0}),n})();function B(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u2116"),t.qZA())}function Z(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u043a\u043d\u0438\u0433\u0438"),t.qZA())}function D(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA())}function v(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0418\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0444\u043e\u0440\u043c\u0443\u043b\u044f\u0440\u0430"),t.qZA())}function M(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0410\u0431\u043e\u043d\u0435\u043d\u0442"),t.qZA())}function J(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0414\u0430\u0442\u0430 \u0432\u044b\u0434\u0430\u0447\u0438"),t.qZA())}function O(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0414\u0430\u0442\u0430 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"),t.qZA())}function A(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0421\u0442\u0430\u0442\u0443\u0441 \u0432\u043e\u0437\u0432\u0440\u0430\u0442\u0430"),t.qZA())}function Q(n,u){1&n&&(t.TgZ(0,"th",8),t._uU(1,"\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043e"),t.qZA())}function Y(n,u){1&n&&t._UZ(0,"th",9),2&n&&t.Q6J("sorter",null)}function w(n,u){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw(),i=e.$implicit,r=e.index;t.xp6(1),t.Oqu(null!=i.id?r+1:"")}}function L(n,u){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null!=e.book&&null!=e.book.id?e.book.id:""," ")}}function P(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"td",13)(1,"tui-text-area",14),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.book.name=r)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("expandable",!0)("ngModel",e.book.name)}}function y(n,u){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",null!=e.userForm&&null!=e.userForm.id?e.userForm.id:""," ")}}function k(n,u){if(1&n&&(t.TgZ(0,"td",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e.userForm.lastName+" "+e.userForm.firstName+" "+e.userForm.middleName," ")}}function E(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"td",13)(1,"tui-input-date",15),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.lendingDate=r)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.lendingDate)}}function I(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"td",13)(1,"tui-input-date",15),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw().$implicit;return t.KtG(o.returnDate=r)}),t.qZA()()}if(2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngModel",e.returnDate)}}function S(n,u){1&n&&(t.TgZ(0,"div"),t._UZ(1,"tui-tag",19),t.qZA()),2&n&&(t.xp6(1),t.Q6J("value","\u0412\u043e\u0437\u0432\u0440\u0430\u0449\u0435\u043d\u043e"))}function H(n,u){1&n&&t._UZ(0,"tui-tag",20),2&n&&t.Q6J("value","\u041d\u0430 \u0440\u0443\u043a\u0430\u0445")}function U(n,u){1&n&&t._UZ(0,"tui-tag",21),2&n&&t.Q6J("value","\u041f\u0440\u043e\u0441\u0440\u043e\u0447\u0435\u043d\u043e")}function R(n,u){if(1&n&&(t.TgZ(0,"td",13),t.YNc(1,S,2,1,"div",16),t.YNc(2,H,1,1,"ng-template",null,17,t.W1O),t.YNc(4,U,1,1,"tui-tag",18),t.qZA()),2&n){const e=t.MAs(3),i=t.oxw().$implicit,r=t.oxw();t.xp6(1),t.Q6J("ngIf",null!=i.bookReturning&&null!=i.bookReturning.returnDate)("ngIfElse",e),t.xp6(3),t.Q6J("ngIf",r.isLate(i))}}function q(n,u){if(1&n){const e=t.EpF();t.TgZ(0,"tui-input-date",15),t.NdJ("ngModelChange",function(r){t.CHM(e);const o=t.oxw(2).$implicit;return t.KtG(o.bookReturning.returnDate=r)}),t.qZA()}if(2&n){const e=t.oxw(2).$implicit;t.Q6J("ngModel",e.bookReturning.returnDate)}}function $(n,u){if(1&n&&(t.TgZ(0,"td",13),t.YNc(1,q,1,1,"tui-input-date",22),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null!=e.bookReturning&&null!=e.bookReturning.returnDate)}}function j(n,u){1&n&&(t.TgZ(0,"button",25),t._uU(1,"\u041f\u043e\u043b\u0443\u0447\u0438\u0442\u044c"),t.qZA())}function z(n,u){if(1&n&&(t.TgZ(0,"td",23),t.YNc(1,j,2,0,"button",24),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngIf",null==e.bookReturning||null==e.bookReturning.returnDate)}}function G(n,u){1&n&&(t.TgZ(0,"tr",10),t.YNc(1,w,2,1,"td",11),t.YNc(2,L,2,1,"td",11),t.YNc(3,P,2,2,"td",11),t.YNc(4,y,2,1,"td",11),t.YNc(5,k,2,1,"td",11),t.YNc(6,E,2,1,"td",11),t.YNc(7,I,2,1,"td",11),t.YNc(8,R,5,3,"td",11),t.YNc(9,$,2,1,"td",11),t.YNc(10,z,2,1,"td",12),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tuiCell","id"),t.xp6(1),t.Q6J("tuiCell","indexBook"),t.xp6(1),t.Q6J("tuiCell","bookName"),t.xp6(1),t.Q6J("tuiCell","indexUserForm"),t.xp6(1),t.Q6J("tuiCell","userFormFullName"),t.xp6(1),t.Q6J("tuiCell","lendingDate"),t.xp6(1),t.Q6J("tuiCell","returnDate"),t.xp6(1),t.Q6J("tuiCell","returned"),t.xp6(1),t.Q6J("tuiCell","returnedDate"),t.xp6(1),t.Q6J("tuiCell","actions"))}let b=(()=>{class n{constructor(e){this.bookLendingService=e,this.changedItems=new Set,this.columns=[]}ngOnInit(){this.bookLendingService.receiveData(),this.columns=["id","indexBook","bookName","indexUserForm","userFormFullName","lendingDate","returnDate","returned","returnedDate","actions"]}ngOnChanges(){null!=this.userForm?(this.columns=["id","indexBook","bookName","lendingDate","returnDate","returned","returnedDate"],console.log(this.userForm),this.bookLendingService.searchFIO=""+this.userForm?.id+this.userForm?.lastName+this.userForm?.firstName+this.userForm?.middleName):this.columns=["id","indexBook","bookName","indexUserForm","userFormFullName","lendingDate","returnDate","returned","returnedDate","actions"]}get data(){return this.bookLendingService.list}isLate(e){const i=new Date(e.returnDate);let r=new Date(i);if(null!=e.bookReturning&&null!=e.bookReturning.returnDate)r=new Date(e.bookReturning.returnDate);else{const o=new Date;r.setFullYear(o.getFullYear()),r.setMonth(o.getMonth()),r.setDate(o.getDate())}return i<r}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.N))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-book-lending-list"]],inputs:{userForm:"userForm"},features:[t.TTD],decls:19,vars:23,consts:[["waIntersectionRoot","",3,"hidden"],["tuiTable","",1,"table",3,"columns"],[1,""],["tuiThGroup",""],["tuiTh","",4,"tuiHead"],["tuiTh","",3,"sorter",4,"tuiHead"],["tuiTbody","",3,"data"],["tuiTr","",4,"ngFor","ngForOf"],["tuiTh",""],["tuiTh","",3,"sorter"],["tuiTr",""],["tuiTd","",4,"tuiCell"],["tuiTd","","class","actions",4,"tuiCell"],["tuiTd",""],[1,"textarea",3,"expandable","ngModel","ngModelChange"],["toNativeDate","",1,"textarea",3,"ngModel","ngModelChange"],[4,"ngIf","ngIfElse"],["templateName",""],["class","tag","size","l","status","error",3,"value",4,"ngIf"],["size","l","status","success",1,"tag",3,"value"],["size","l","status","warning",1,"tag",3,"value"],["size","l","status","error",1,"tag",3,"value"],["toNativeDate","","class","textarea",3,"ngModel","ngModelChange",4,"ngIf"],["tuiTd","",1,"actions"],["tuiButton","","icon","tuiIconBook","size","s",4,"ngIf"],["tuiButton","","icon","tuiIconBook","size","s"]],template:function(e,i){1&e&&(t.TgZ(0,"tui-scrollbar",0)(1,"table",1)(2,"thead",2)(3,"tr",3),t.YNc(4,B,2,0,"th",4),t.YNc(5,Z,2,0,"th",4),t.YNc(6,D,2,0,"th",4),t.YNc(7,v,2,0,"th",4),t.YNc(8,M,2,0,"th",4),t.YNc(9,J,2,0,"th",4),t.YNc(10,O,2,0,"th",4),t.YNc(11,A,2,0,"th",4),t.YNc(12,Q,2,0,"th",4),t.YNc(13,Y,1,1,"th",5),t.qZA()(),t.TgZ(14,"tbody",6),t.YNc(15,G,11,10,"tr",7),t.ALo(16,"searchOnHands"),t.ALo(17,"searchByFIO"),t.ALo(18,"search"),t.qZA()()()),2&e&&(t.Q6J("hidden",!0),t.xp6(1),t.Q6J("columns",i.columns),t.xp6(3),t.Q6J("tuiHead","id"),t.xp6(1),t.Q6J("tuiHead","indexBook"),t.xp6(1),t.Q6J("tuiHead","bookName"),t.xp6(1),t.Q6J("tuiHead","indexUserForm"),t.xp6(1),t.Q6J("tuiHead","userFormFullName"),t.xp6(1),t.Q6J("tuiHead","lendingDate"),t.xp6(1),t.Q6J("tuiHead","returnDate"),t.xp6(1),t.Q6J("tuiHead","returned"),t.xp6(1),t.Q6J("tuiHead","returnedDate"),t.xp6(1),t.Q6J("tuiHead","actions"),t.xp6(1),t.Q6J("data",i.data),t.xp6(1),t.Q6J("ngForOf",t.xi3(16,14,t.xi3(17,17,t.xi3(18,20,i.data,i.bookLendingService.search),i.bookLendingService.searchFIO),i.bookLendingService.searchOnlyHands)))},dependencies:[l.sg,l.O5,s.c4,s.jY,s.EE,s.Ws,s.Kt,s.fu,s.Bl,s.DZ,f.v0,c.Jl,c.eQ,_.JJ,_.On,d.jL,d.k_,F.x,h.IB,x.Gi,C,N,T],styles:[".table[_ngcontent-%COMP%]{width:100%}.actions[_ngcontent-%COMP%]{width:6rem}.textarea[_ngcontent-%COMP%]{min-height:var(--tui-height-l)}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{white-space:nowrap;border-color:transparent;border-right-color:var(--tui-base-04)}td[_ngcontent-%COMP%]:last-child, th[_ngcontent-%COMP%]:last-child{border-right-color:transparent}th[_ngcontent-%COMP%]{border-bottom-color:var(--tui-base-04)}tbody[_ngcontent-%COMP%]{border-color:transparent}tr[_ngcontent-%COMP%]:nth-child(even):not(.tr_changed) > td[_ngcontent-%COMP%]{background:var(--tui-base-03)}.action-btn[_ngcontent-%COMP%]{transition-property:opacity;transition-duration:var(--tui-duration, .3s);transition-timing-function:ease-in-out;opacity:0}tr[_ngcontent-%COMP%]:hover   .action-btn[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]:focus-within   .action-btn[_ngcontent-%COMP%]{opacity:1}.tr_changed[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:var(--tui-warning-bg)}.tag[_ngcontent-%COMP%]{margin:.5 rem}"]}),n})()}}]);